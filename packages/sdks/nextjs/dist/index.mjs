"use client";import p,{useEffect as w}from"react";import h from"next/script";function v({projectId:r,cdnUrl:a="https://cdn.openpreview.dev/opv2.js"}){let c=()=>{if(window.OpenPreview){let e=window.location.pathname,i=window.location.search.slice(1);window.OpenPreview.init({projectId:r,path:e,search:i})}};return w(()=>{let e=()=>{if(window.OpenPreview){let t=window.location.pathname,n=window.location.search.slice(1);window.OpenPreview.init({projectId:r,path:t,search:n})}};window.addEventListener("popstate",e);let i=history.pushState.bind(history),s=history.replaceState.bind(history);return history.pushState=function(t,n,o){i(t,n,o),e()},history.replaceState=function(t,n,o){s(t,n,o),e()},()=>{window.removeEventListener("popstate",e),history.pushState=i,history.replaceState=s}},[r]),p.createElement(h,{src:a,strategy:"afterInteractive",onReady:c})}export{v as OpenPreview};
